!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).VueMask={})}(this,(function(e){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?n(Object(a),!0).forEach((function(r){t(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}var o=[];function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";if(!u(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(r))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(r),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?r:e})).join("")}function u(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}function c(e){for(var r,t=[];-1!==(r=e.indexOf("[]"));)t.push(r),e.splice(r,1);return{maskWithoutCaretTraps:e,indexes:t}}var s=[];function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!u(t)){if("function"!==r(t))throw new Error("Text-mask:conformToMask; The mask property must be an array.");t=c(t=t(e,n)).maskWithoutCaretTraps}var a=n.guide,o=void 0===a||a,f=n.previousConformedValue,l=void 0===f?"":f,p=n.placeholderChar,d=void 0===p?"_":p,v=n.placeholder,h=void 0===v?i(t,d):v,y=n.currentCaretPosition,m=n.keepCharPositions,g=!1===o&&void 0!==l,b=e.length,k=l.length,w=h.length,O=t.length,x=b-k,j=x>0,P=y+(j?-x:0),E=P+Math.abs(x);if(!0===m&&!j){for(var M="",T=P;T<E;T++)h[T]===d&&(M+=d);e=e.slice(0,P)+M+e.slice(P,b)}for(var V=e.split("").map((function(e,r){return{char:e,isNew:r>=P&&r<E}})),S=b-1;S>=0;S--){var A=V[S].char;if(A!==d){var C=S>=P&&k===O;A===h[C?S-x:S]&&V.splice(S,1)}}var _="",N=!1;e:for(var D=0;D<w;D++){var R=h[D];if(R===d){if(V.length>0)for(;V.length>0;){var U=V.shift(),L=U.char,z=U.isNew;if(L===d&&!0!==g){_+=d;continue e}if(t[D].test(L)){if(!0===m&&!1!==z&&""!==l&&!1!==o&&j){for(var H=V.length,I=null,J=0;J<H;J++){var W=V[J];if(W.char!==d&&!1===W.isNew)break;if(W.char===d){I=J;break}}null!==I?(_+=L,V.splice(I,1)):D--}else _+=L;continue e}N=!0}!1===g&&(_+=h.substr(D,w));break}_+=R}if(g&&!1===j){for(var X=null,$=0;$<_.length;$++)h[$]===d&&(X=$);_=null!==X?_.substr(0,X+1):""}return{conformedValue:_,meta:{someCharsRejected:N}}}var l={__nextCharOptional__:!0},p={"#":/\d/,A:/[a-z]/i,N:/[a-z0-9]/i,"?":l,X:/./},d=function(e){return r=e.toString().replace(/.(\/)[gmiyus]{0,6}$/,(function(e){return e.replace("/","?/")})),t=r.lastIndexOf("/"),new RegExp(r.slice(1,t),r.slice(t+1));var r,t},v=function(e){return e instanceof RegExp?e:function(e){return new RegExp("/[".concat(function(e){return"[\\^$.|?*+()".indexOf(e)>-1?"\\".concat(e):e}(e),"]/"))}(e)};function h(e){return e.split("").map((function(e,r,t){var n=p[e]||e,a=t[r-1];return n===l?null:(p[a]||a)===l?d(v(n)):n})).filter(Boolean)}var y=function(e,r){var t=document.createEvent("HTMLEvents");t.initEvent(r,!0,!0),e.dispatchEvent(t)},m=function(e){return e instanceof HTMLInputElement?e:e.querySelector("input")||e},g="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase(),b=g&&g.indexOf("edge/")>0,k=g&&g.indexOf("android")>0,w=g&&/chrome\/\d+/.test(g)&&!b;function O(e,r){for(var t=0;t<r.length;t+=1){var n=r.charAt(t);switch(n){case"#":case"A":case"?":case"N":case"X":break;default:e=e.replace(n,"")}}return e}var x=function(){var e=new Map,r={previousValue:"",mask:[]};function t(t){return e.get(t)||a({},r)}return{partiallyUpdate:function(r,n){e.set(r,a(a({},t(r)),n))},remove:function(r){e.delete(r)},get:t}}();function j(e){var r=y.bind(null,e,"input");k&&w?setTimeout(r,0):r()}function P(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.value,n=x.get(e),a=n.previousValue,o=n.mask,i=n.rawMask,u=t!==a,c=t.length>a.length,s=t&&u&&c;if(r||s){var l=f(t,o,{guide:!1}),p=l.conformedValue;e.value=p,e.dataset.unmasked=O(p,i),j(e)}x.partiallyUpdate(e,{previousValue:t})}function E(e,r){x.partiallyUpdate(e,{mask:h(r),rawMask:r})}var M={bind:function(e,r){var t=r.value;E(e=m(e),t),P(e)},componentUpdated:function(e,r){var t=r.value,n=r.oldValue;e=m(e);var a=t!==n;a&&E(e,t),P(e,a)},unbind:function(e){e=m(e),x.remove(e)}};function T(e,r){return f(e,h(r),{guide:!1}).conformedValue}var V=function(e){e.directive("mask",M),e.filter("VMask",T)};e.VueMaskDirective=M,e.VueMaskFilter=T,e.VueMaskPlugin=V,e.default=V,Object.defineProperty(e,"__esModule",{value:!0})}));
